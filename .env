# Target
TARGET_URL=https://zm.bitmoji-zmlh.com/skinmgr/#/skinmgr/recordsList

# Choose strategy: DOM or NETWORK (NETWORK is usually more stable for SPAs)
EXTRACTION_STRATEGY=DOM

# DOM selectors (used if EXTRACTION_STRATEGY=DOM)

# Infinite scroll settings (set to 0 to skip)
SCROLL_STEPS=10
SCROLL_DELAY_MS=600

# Mongo
MONGO_URI=mongodb://127.0.0.1:27017/bitmoji

# Fan-out endpoints (replace with real URLs)
SERVER_A_ENDPOINT=http://localhost:3000/api/skins
SERVER_B_ENDPOINT=https://your-server.example.com/api/skins

# Runtime
CRON_EXPR=*/10 * * * *
HEADLESS=true
NAV_TIMEOUT_MS=60000
WAIT_UNTIL=networkidle2
# If you want to use system Chrome (more stealth), set:
# PUPPETEER_EXECUTABLE_PATH=/Applications/Google Chrome.app/Contents/MacOS/Google Chrome

# Authentication settings
AUTH_EMAIL=admin@facewashfox.com
AUTH_USERNAME=admin@facewashfox.com
AUTH_PASSWORD=rW7SEu8J80R
AUTH_CLIENT_ID=93dc94c23d83c2ca
AUTH_APP_TYPE=zmskin
AUTH_CODE_TOKEN=-1
AUTH_USE_API_LOGIN=false
AUTH_PREFER_UI_LOGIN=false
# Optional: force an access token from the web UI (URL-encoded ok)
FORCE_ACCESS_TOKEN=
FORCE_LOCALE=en
FORCE_LANGUAGE=en
FORCE_WEIDU=all
FORCE_HEADERS_JSON=


# Updated selectors for table data
LIST_ITEM_SELECTOR=tr[data-key]
TITLE_SELECTOR=td:nth-child(3) .name
IMAGE_SELECTOR=td:nth-child(2) img
LINK_SELECTOR=td:nth-child(10) a[href*="view"]
DEBUG_EMPTY_PAGES=true
DEBUG_API_REQUESTS=true


ALLOWED_ORIGINS=http://localhost:3000
# Pagination/refresh tuning
REAUTH_EVERY_PAGES=30
MAX_AUTH_RETRIES=3
DEBUG_API_REQUESTS=true
DEBUG_EMPTY_PAGES=true
USE_NODE_FETCH=true

# Use server-aligned time range (offset by -1h)
FORCE_DATE_OFFSET_MINUTES=-60
CHUNK_DATE_RANGE=false

# Force page size for faster pagination (smaller = less pressure per request)
FORCE_PAGE_SIZE=50

# Longer waits to avoid burning through auth tokens between pages
PAGE_DELAY_MS=500
ERROR_DELAY_MS=3000

EMPTY_PAGE_STOP=3
